Version 4
SHEET 1 2080 680
WIRE 224 -560 96 -560
WIRE 656 -560 656 -608
WIRE 656 -560 224 -560
WIRE 736 -560 656 -560
WIRE 96 -544 96 -560
WIRE 224 -432 224 -560
WIRE 96 -416 96 -464
WIRE 96 -416 -272 -416
WIRE 176 -416 96 -416
WIRE -272 -400 -272 -416
WIRE -544 -352 -640 -352
WIRE -384 -352 -464 -352
WIRE -336 -352 -384 -352
WIRE 96 -256 96 -416
WIRE 16 -208 16 -224
WIRE 16 -208 -144 -208
WIRE 32 -208 16 -208
WIRE 736 -176 736 -560
WIRE 544 -160 544 -224
WIRE 704 -160 544 -160
WIRE 816 -144 768 -144
WIRE 704 -128 672 -128
WIRE 224 -64 224 -256
WIRE 304 -64 224 -64
WIRE 352 -64 304 -64
WIRE 480 -64 432 -64
WIRE 544 -64 480 -64
WIRE 672 -64 672 -128
WIRE 672 -64 544 -64
WIRE 304 -32 304 -64
WIRE 480 -16 480 -64
WIRE 544 -16 544 -64
WIRE 304 48 304 32
WIRE -144 80 -144 -128
WIRE 816 80 816 -144
WIRE 816 80 -144 80
WIRE 224 176 224 -64
WIRE 240 176 224 176
WIRE 432 176 320 176
WIRE 432 208 432 176
FLAG 480 64 0
FLAG 544 48 0
FLAG 304 48 0
FLAG -384 -272 0
FLAG -48 -128 0
FLAG 96 -160 0
FLAG 656 -688 0
FLAG -720 -352 0
FLAG -272 -304 0
FLAG 736 -112 0
FLAG 432 208 0
FLAG 544 -304 0
FLAG -48 240 0
FLAG -48 160 VResistance
DATAFLAG -416 -352 ""
DATAFLAG -608 -352 ""
DATAFLAG 816 -64 ""
SYMBOL res -160 -224 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 80 -560 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL npn 32 -256 R0
SYMATTR InstName Q1
SYMBOL pmos 176 -336 M180
SYMATTR InstName M1
SYMBOL npn -336 -400 R0
SYMATTR InstName Q2
SYMBOL res 208 -352 R0
SYMATTR InstName R4
SYMATTR Value 10
SYMBOL res 448 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 34 51 VTop 2
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL res 496 80 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 1000k
SYMBOL cap 288 -32 R0
SYMATTR InstName C1
SYMATTR Value 1pf
SYMBOL cap 528 -16 R0
SYMATTR InstName C2
SYMATTR Value 10pf
SYMBOL res -448 -368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL res -368 -256 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value 1000k
SYMBOL voltage 656 -592 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage -624 -352 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 5 1ms 0 0 0.1ms 0 1)
SYMBOL OpAmps\\UniversalOpamp2 736 -144 R0
SYMATTR InstName U2
SYMBOL res 224 192 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R10
SYMATTR Value V(VResistance)
SYMBOL zener 880 -368 R0
SYMATTR InstName D2
SYMBOL diode 1040 -160 R0
SYMATTR InstName D3
SYMBOL voltage 544 -208 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 4
SYMBOL res 0 -128 R0
SYMATTR InstName R2
SYMATTR Value 1000k
SYMBOL SpecialFunctions\\varistor 496 160 R270
SYMATTR InstName A1
SYMBOL voltage -48 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PWL(0 100000 5ms 200)
TEXT 168 -768 Left 2 ;include .lib opamp.sub
TEXT -834 214 Left 2 !.tran 0 10ms 0
TEXT 840 -624 Left 2 !.model MyIdealDiode D(Ron=1 Roff=1Meg Vfwd=1 Vrev=2 Ilimit=1 RevIlimit=1 Epsilon=1 RevEpsilon=1)
